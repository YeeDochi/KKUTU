<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>yeedochi/kkutu</title>
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" href="https://cdn.simpleicons.org/github/ffffff" type="image/svg+xml">
    <style>
        /* ê²Œì„ ì „ìš© ìŠ¤íƒ€ì¼ */
        #chatOutput { height: 350px; overflow-y: auto; background: var(--input-bg); border: 1px solid var(--border-color); border-radius: 6px; padding: 10px; margin-bottom: 10px; font-size: 14px; }
        #chatOutput p { margin: 2px 0; padding: 4px 8px; }
        #chatOutput p:nth-child(even) { background-color: rgba(127,127,127,0.05); }

        /* [ìˆ˜ì •] ì˜ëª»ëœ ID(#roomListOutput)ë¥¼ ì˜¬ë°”ë¥¸ í´ë˜ìŠ¤(.room-item)ë¡œ ë³€ê²½ */
        #room-list { list-style: none; padding: 0; margin: 0; }
        .room-item { padding: 12px 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .room-item:first-child { border-top: none; }
        .room-item:last-child { border-bottom: none; }
    </style>
</head>
<body>
<div id="alert-modal" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center; z-index:2000;">
    <div class="box" style="width:320px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
        <div class="box-header">ì•Œë¦¼</div>
        <div style="padding: 20px; text-align: center; color: var(--text-primary);">
            <p id="alert-msg-text" style="margin: 0; word-break: keep-all;">ë©”ì‹œì§€ ë‚´ìš©</p>
        </div>
        <div style="padding:16px; border-top: 1px solid var(--border-color);">
            <button class="btn-primary" onclick="closeAlert()" style="width: 100%;">í™•ì¸</button>
        </div>
    </div>
</div>
<header>
    <div class="repo-breadcrumb">
        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" width="30" style="border-radius:50%; opacity:1;">
        <a href="/" class="user-name">game-hub</a>
        <span style="color:var(--text-primary)">/</span>
        <a href="#" class="repo-name">kkutu</a>
        <span class="badge">Public</span>
    </div>
    <div style="display: flex; gap: 8px; align-items: center; margin-left: auto;">
        <div id="loggedInArea" class="hidden" style="display: flex; align-items: center; gap: 8px;">
            <span style="color: var(--text-primary); font-size: 14px;">ğŸ‘‹ <b id="userNickname">User</b></span>
            <button class="btn-default" onclick="logout()" style="padding: 4px 8px; font-size: 12px;">Sign out</button>
        </div>
        <button class="theme-btn" onclick="toggleTheme()">Dark/Light</button>
    </div>
</header>

<div id="login-screen" class="container" style="max-width: 400px; margin-top: 50px;">
    <div class="box">
        <div class="box-header">ê²Œì„ ì…ì¥</div>
        <div style="padding: 20px;">
            <label style="display:block; font-weight:600; margin-bottom: 8px; font-size: 14px;">ë‹‰ë„¤ì„</label>
            <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" onkeypress="if(event.key==='Enter') goToLobby()">
            <button class="btn-primary" onclick="goToLobby()" style="width:100%; margin-top:20px;">ì…ì¥í•˜ê¸°</button>
        </div>
    </div>
</div>

<div id="lobby" class="container hidden">
    <div class="box">
        <div class="box-header">
            <span>ëŒ€ê¸°ì‹¤</span>
            <span id="welcome-msg" style="font-weight:normal; font-size: 12px; color: var(--text-secondary);"></span>
        </div>

        <div style="padding: 16px; background: var(--bg-header); border-bottom: 1px solid var(--border-color); display:flex; gap:10px; flex-wrap:wrap;">
            <input type="text" id="roomName" placeholder="ë°© ì œëª©" value="ì¦ê±°ìš´ ëë§ì‡ê¸°" style="flex:2; min-width: 150px;">
            <div style="display:flex; gap:5px; align-items:center;">
                <label style="font-size:12px; color:var(--text-secondary);">ì¸ì›:</label>
                <input type="number" id="maxPlayers" value="4" min="2" max="8" style="width:50px;">
                <label style="font-size:12px; color:var(--text-secondary);">ë´‡:</label>
                <input type="number" id="botCount" value="1" min="0" max="7" style="width:50px;">
            </div>
            <button class="btn-primary" onclick="createRoom()">ë°© ë§Œë“¤ê¸°</button>
        </div>

        <div style="max-height: 400px; overflow-y: auto;">
            <div style="padding: 10px 16px; font-weight: 600; font-size: 14px; border-bottom: 1px solid var(--border-color); display:flex; justify-content: space-between; background-color: var(--box-bg); align-items: center;">
                <span>ê°œì„¤ëœ ë°© ëª©ë¡</span>
                <button class="btn-default" onclick="loadRooms()" style="font-size: 12px; padding: 4px 10px;">
                    <i class="fas fa-sync-alt"></i> ìƒˆë¡œê³ ì¹¨
                </button>
            </div>

            <ul id="room-list" style="list-style: none; padding: 0; margin: 0;">
            </ul>
        </div>
    </div>
</div>

<div id="gameRoom" class="container hidden">
    <div class="box">
        <div class="box-header">
            <span id="roomTitle">ê²Œì„ ë°©</span>
            <span id="timerDisplay" style="color:#cf222e; font-weight:bold; font-family: monospace;">[ëŒ€ê¸° ì¤‘]</span>
        </div>
        <div id="errorOutput" style="padding: 10px; color:#cf222e; font-size:13px; font-weight:bold; display:none;"></div>
        <div id="chatOutput"></div>
        <div style="padding: 16px; border-top: 1px solid var(--border-color);">
            <div style="display: flex; gap: 10px;">
                <input type="text" id="wordInput" placeholder="ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." disabled style="flex: 1;" onkeypress="if(event.key==='Enter') sendWord()">
                <button id="sendWordBtn" class="btn-primary" style="width: 80px;" onclick="sendWord()">ì…ë ¥</button>
            </div>
            <div style="margin-top: 10px; display: flex; justify-content: space-between;">
                <button id="forfeitBtn" class="btn-danger" onclick="forfeitTurn()" disabled>ê¸°ê¶Œ</button>
                <button id="leaveRoomBtn" class="btn-default" onclick="exitRoom()">ë‚˜ê°€ê¸°</button>
            </div>
        </div>
    </div>
</div>

<script src="/KKUTU/game.js"></script>
</body>
</html>