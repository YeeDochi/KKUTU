<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Kkutu-Online (Dev Environment)</title>
    <style>
        /* --- ê¸°ë³¸ ì„¤ì • --- */
        body, html {
            margin: 0;
            padding: 0;
            height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #1e1e1e;
            color: #d4d4d4;
            overflow: hidden;
        }

        /* --- IDE ì „ì²´ ë ˆì´ì•„ì›ƒ --- */
        .ide-container { display: flex; height: 100vh; }

        /* --- 1. ì‚¬ì´ë“œë°” --- */
        .sidebar {
            width: 200px;
            background-color: #252526;
            padding: 15px;
            box-sizing: border-box;
            border-right: 1px solid #333333;
            flex-shrink: 0;
        }
        .sidebar h3 {
            font-size: 14px;
            color: #cccccc;
            margin: 0 0 10px 0;
            text-transform: uppercase;
        }
        .file-tree { list-style: none; padding-left: 0; margin: 0; }
        .file-tree li {
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            white-space: nowrap;
        }
        .file-tree li:hover { background-color: #2a2d2e; }
        .file-tree li.active-file { /* í™œì„±í™”ëœ íŒŒì¼ */
            background-color: #37373d;
            color: #fff;
            font-weight: bold;
        }
        .file-tree .icon { margin-right: 8px; }

        /* --- 2. ë©”ì¸ ì»¨í…ì¸  (ì—ë””í„° + í„°ë¯¸ë„) --- */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- 2a. ì—ë””í„° íƒ­ --- */
        .editor-tabs {
            display: flex;
            background-color: #2d2d2d;
            flex-shrink: 0;
        }
        .tab {
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
            padding: 10px 15px;
            background-color: #2d2d2d;
            border-right: 1px solid #252526;
            font-size: 14px;
            color: #9e9e9e;
        }
        .tab.active-tab { /* í™œì„±í™”ëœ íƒ­ë§Œ ë³´ì„ */
            display: block;
            background-color: #1e1e1e;
            color: #ffffff;
        }

        /* --- 2b. ì—ë””í„° ì°½ --- */
        .editor-pane {
            flex-grow: 1;
            background-color: #1e1e1e;
            position: relative; /* ìì‹ ìš”ì†Œì˜ ê¸°ì¤€ì  */
        }

        /* [í•µì‹¬] ì»¨í…ì¸  ì°½ (ê²Œì„/ì½”ë“œ) */
        .content-pane {
            display: none; /* ëª¨ë“  ì°½ì„ ì¼ë‹¨ ìˆ¨ê¹€ */
            width: 100%;
            height: 100%;
            overflow: auto;
        }
        .content-pane.active {
            display: block; /* í™œì„±í™”ëœ ì°½ë§Œ ë³´ì—¬ì¤Œ */
        }

        /* IFrame ìŠ¤íƒ€ì¼ */
        #preview-content-pane iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #000000;
        }

        /* ì½”ë“œ ë³´ê¸° ìŠ¤íƒ€ì¼ */
        .code-view-pane pre {
            margin: 0;
            padding: 10px;
        }
        .code-view-pane code {
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            white-space: pre;
            color: #d4d4d4;
        }

        /* --- 2c. í„°ë¯¸ë„ ì°½ (ì¥ì‹ìš©) --- */
        .terminal-pane {
            height: 150px;
            background-color: #181818;
            border-top: 1px solid #333333;
            flex-shrink: 0;
            padding: 10px;
            box-sizing: border-box;
            overflow-y: auto;
            font-family: 'Consolas', 'Courier New', monospace;
        }
        .terminal-pane .terminal-header {
            font-size: 14px;
            color: #bbbbbb;
            margin-bottom: 10px;
        }
        .terminal-pane p { margin: 0 0 5px 0; font-size: 14px; }
        .terminal-pane .prompt { color: #61afef; }
        .terminal-pane .success { color: #98c379; }
    </style>
</head>
<body>

<div class="ide-container">

    <!-- 1. ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <h3>Explorer</h3>
        <ul class="file-tree">
            <li><span class="icon">ğŸ“</span> Kkutu-Online</li>
            <!--
              [í•µì‹¬] data-tab ì†ì„±ìœ¼ë¡œ ì–´ë–¤ íƒ­ê³¼ ì»¨í…ì¸ ë¥¼ í™œì„±í™”í• ì§€ ì§€ì •í•©ë‹ˆë‹¤.
            -->
            <li class="file-item active-file" data-tab="preview">
                <span class="icon" style="margin-left: 15px;">â–¶ï¸</span> game.html [Preview]
            </li>
            <li class="file-item" data-tab="html-code">
                <span class="icon" style="margin-left: 15px;">ğŸ“„</span> game.html [Code]
            </li>
            <li class="file-item" data-tab="js-code">
                <span class="icon" style="margin-left: 15px;">ğŸ“„</span> game.js [Code]
            </li>
        </ul>
    </div>

    <!-- 2. ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
    <div class="main-content">

        <!-- 2a. ì—ë””í„° íƒ­ (ì´ì œ JSê°€ ì œì–´) -->
        <div class="editor-tabs">
            <div class="tab active-tab" data-tab="preview"><span class="icon">â–¶ï¸</span> game.html [Preview]</div>
            <div class="tab" data-tab="html-code"><span class="icon">ğŸ“„</span> game.html [Code]</div>
            <div class="tab" data-tab="js-code"><span class="icon">ğŸ“„</span> game.js [Code]</div>
        </div>

        <!-- 2b. ì—ë””í„° ì°½ -->
        <div class="editor-pane">
            <!-- ê²Œì„ ì‹¤í–‰ ì°½ (ê¸°ë³¸ í™œì„±í™”) -->
            <div id="preview-content-pane" class="content-pane active">
                <iframe src="game.html" title="Kkutu Game"></iframe>
            </div>

            <!-- game.html ì½”ë“œ ë³´ê¸° ì°½ (ìˆ¨ê²¨ì§) -->
            <div id="html-code-content-pane" class="content-pane code-view-pane">
                <pre><code><!-- content-html.txt ë¡œë“œ ì¤‘... --></code></pre>
            </div>

            <!-- game.js ì½”ë“œ ë³´ê¸° ì°½ (ìˆ¨ê²¨ì§) -->
            <div id="js-code-content-pane" class="content-pane code-view-pane">
                <pre><code><!-- content-js.txt ë¡œë“œ ì¤‘... --></code></pre>
            </div>
        </div>

        <!-- 2c. í„°ë¯¸ë„ ì°½ (ì¥ì‹ìš©) -->
        <div class="terminal-pane">
            <div class="terminal-header">TERMINAL</div>
            <p><span class="prompt">C:\Projects\Kkutu-Online&gt;</span> npm run dev</p>
            <p><span class="success">  âœ  Local:   http://localhost:5173/</span></p>
            <p><span class="success">  âœ  Running game.html in preview mode.</span></p>
            <p><span class="success">  âœ  Click files in explorer to view code.</span></p>
        </div>
    </div>
</div>

<!-- [í•µì‹¬] íƒ­ ì „í™˜ ë° ì½”ë“œ ë¡œë”©ì„ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- 1. ì½”ë“œ íŒŒì¼(.txt)ì„ ë¹„ë™ê¸°ë¡œ ë¶ˆëŸ¬ì™€ <pre> íƒœê·¸ì— ì‚½ì… ---
        loadCodeFiles();

        // --- 2. íƒ­ ì „í™˜ ë¡œì§ ì„¤ì • ---
        setupTabSwitching();
    });

    async function loadCodeFiles() {
        try {
            // ë‘ ê°œì˜ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë™ì‹œì— ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
            const [htmlRes, jsRes] = await Promise.all([
                fetch('content-html.txt'),
                fetch('content-js.txt')
            ]);

            if (!htmlRes.ok) throw new Error('content-html.txt ë¡œë“œ ì‹¤íŒ¨');
            if (!jsRes.ok) throw new Error('content-js.txt ë¡œë“œ ì‹¤íŒ¨');

            const htmlCode = await htmlRes.text();
            const jsCode = await jsRes.text();

            // ë¶ˆëŸ¬ì˜¨ ì½”ë“œë¥¼ í…ìŠ¤íŠ¸ë¡œ ì‚½ì…
            document.querySelector('#html-code-content-pane pre code').textContent = htmlCode;
            document.querySelector('#js-code-content-pane pre code').textContent = jsCode;

        } catch (error) {
            console.error("ì½”ë“œ íŒŒì¼ ë¡œë”© ì˜¤ë¥˜:", error);
            document.querySelector('#html-code-content-pane pre code').textContent = `ì˜¤ë¥˜: ${error.message}`;
            document.querySelector('#js-code-content-pane pre code').textContent = `ì˜¤ë¥˜: ${error.message}`;
        }
    }

    function setupTabSwitching() {
        const fileItems = document.querySelectorAll('.file-item');
        const tabs = document.querySelectorAll('.tab');
        const contentPanes = document.querySelectorAll('.content-pane');

        fileItems.forEach(item => {
            item.addEventListener('click', (e) => {
                const targetId = e.currentTarget.dataset.tab; // ì˜ˆ: "preview", "html-code", "js-code"

                // 1. ëª¨ë“  'active' í´ë˜ìŠ¤ ì œê±°
                fileItems.forEach(f => f.classList.remove('active-file'));
                tabs.forEach(t => t.classList.remove('active-tab'));
                contentPanes.forEach(c => c.classList.remove('active'));

                // 2. í´ë¦­ëœ íŒŒì¼ê³¼ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œë“¤ì— 'active' í´ë˜ìŠ¤ ì¶”ê°€

                // ì‚¬ì´ë“œë°” íŒŒì¼
                e.currentTarget.classList.add('active-file');

                // ìƒë‹¨ íƒ­
                const activeTab = document.querySelector(`.tab[data-tab="${targetId}"]`);
                if (activeTab) activeTab.classList.add('active-tab');

                // ë©”ì¸ ì»¨í…ì¸  ì°½
                const activePane = document.getElementById(`${targetId}-content-pane`);
                if (activePane) activePane.classList.add('active');
            });
        });
    }
</script>

</body>
</html>

